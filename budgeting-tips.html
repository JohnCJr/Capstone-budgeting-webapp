<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
    />
    <title>Budgeting Tips</title>
    <link rel="stylesheet" href="reset.css" />
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="tips-styles.css" />
    <link rel="stylesheet" href="bootstrap.min.css" />
    <script type="module" src="initialize-firebase.js"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
      .controls {
        display: flex;
        flex-wrap: wrap;
        gap: 15px;
        margin-bottom: 20px;
        justify-content: center;
      }
      .controls div {
        flex: 1 1 150px;
        min-width: 150px;
        max-width: 200px;
      }
      .controls label {
        display: inline-block;
        margin-right: 5px;
      }
      .controls input {
        width: 100%;
        padding: 8px;
        border: 1px solid #ccc;
        border-radius: 4px;
      }
      .controls button {
        padding: 8px 15px;
        border: none;
        background-color: #007bff;
        color: white;
        border-radius: 4px;
        cursor: pointer;
        flex: 1 1 100%;
        max-width: 200px;
      }
      .controls button:hover {
        background-color: #0056b3;
      }
      .chart-container {
        width: 100%;
        height: 600px;
        border-radius: 20px;
        overflow: hidden;
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
        margin-bottom: 20px;
        position: relative;
      }
      #compound-interest-chart {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
      }
      .left {
        background: linear-gradient(to bottom, #c9f7ff, #e0e0ff);
        padding: 20px;
      }
      .tips-section article {
        margin-bottom: 20px;
      }
      .home-button-container {
        display: flex;
        justify-content: center;
        margin-top: 20px;
      }
      .home-button-container button {
        padding: 10px 20px;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
      }
      .home-button-container button:hover {
        background-color: #0056b3;
      }
      @media (max-width: 768px) {
        .controls {
          flex-direction: column;
          align-items: center;
        }
        .controls div {
          max-width: 100%;
          flex: 1 1 0;
        }
        .chart-container {
          height: 400px;
        }
        #compound-interest-chart {
          height: 100%;
        }
        .plotly-title {
          max-width: 80%;
        }
      }
    </style>
  </head>
  <body>
    <div class="site_container">
      <header class="header"></header>
      <main class="main">
        <div class="container">
          <header class="header">
            <h1>Budgeting Tips for College Students</h1>
          </header>
          <div class="main-content">
            <section class="tips-section">
              <article class="tip">
                <h2>1. Track Your Spending</h2>
                <p>
                  Keeping track of your daily expenses helps you understand
                  where your money goes. Use a budgeting app or keep a journal.
                </p>
              </article>
              <article class="tip">
                <h2>2. Create a Budget</h2>
                <p>
                  Establish a monthly budget based on your income and expenses.
                  Make sure to categorize your spending.
                </p>
              </article>
              <article class="tip">
                <h2>3. Prioritize Needs Over Wants</h2>
                <p>
                  Ensure that essential expenses like rent, groceries, and
                  utilities are covered before spending on non-essentials.
                </p>
              </article>
              <article class="tip">
                <h2>4. Save for Emergencies</h2>
                <p>
                  Set aside a small amount each month for unexpected expenses.
                  An emergency fund can prevent financial stress.
                </p>
              </article>
              <article class="tip">
                <h2>5. Avoid Unnecessary Debt</h2>
                <p>
                  Use credit cards wisely and avoid taking on debt for
                  non-essential purchases. Pay off your balance each month if
                  possible.
                </p>
              </article>
            </section>
            <div class="home-button-container">
              <button onclick="goHome()">Return to Home</button>
            </div>
          </div>
        </div>
      </main>
      <section class="left">
        <div class="container">
          <h1 class="text-center">fill this in with a title</h1>
          <div class="chart-container">
            <div id="compound-interest-chart"></div>
          </div>
          <div class="controls">
            <div>
              <label for="interestRate">Annual Interest Rate (%): </label>
              <input type="number" id="interestRate" value="10" step="0.1" />
            </div>
            <div>
              <label for="monthlyContribution">Monthly Contribution ($):</label>
              <input
                type="number"
                id="monthlyContribution"
                value="1000"
                step="10"
              />
            </div>
            <div>
              <label for="timePeriod">Time Period (years): </label>
              <input type="number" id="timePeriod" value="30" step="1" />
            </div>
            <div>
              <button onclick="updateChart()">Update Chart</button>
            </div>
          </div>
          <script>
            function calculateCompoundInterest(P, r, n, PMT, years) {
              const months = years * 12;
              const t = Array.from({ length: months + 1 }, (_, i) => i / 12);

              function futureValue(
                months,
                rate,
                annualCompounds,
                monthlyContribution
              ) {
                let fv = 0;
                for (let i = 1; i <= months; i++) {
                  fv +=
                    monthlyContribution *
                    Math.pow(
                      1 + rate / annualCompounds,
                      annualCompounds * (i / 12)
                    );
                }
                return fv;
              }

              const A = t.map((time, index) => futureValue(index, r, n, PMT));
              const totalContributions = t.map((time, index) => PMT * index);

              return { t, A, totalContributions };
            }

            function updateChart() {
              const P = 0; // Initial principal amount (assuming no initial deposit)
              const r =
                parseFloat(document.getElementById("interestRate").value) / 100; // Annual interest rate
              const n = 1; // Number of times interest is compounded per year (annually)
              const PMT = parseFloat(
                document.getElementById("monthlyContribution").value
              ); // Monthly contribution
              const years = parseInt(
                document.getElementById("timePeriod").value
              ); // Time period

              const { t, A, totalContributions } = calculateCompoundInterest(
                P,
                r,
                n,
                PMT,
                years
              );

              const data = [
                {
                  x: t,
                  y: totalContributions,
                  type: "scatter",
                  mode: "lines",
                  name: "Total Contributions",
                  line: { dash: "dash", color: "blue" },
                },
                {
                  x: t,
                  y: A,
                  type: "scatter",
                  mode: "lines",
                  name: "Principal + Interest",
                  line: { color: "green" },
                },
              ];

              const layout = {
                title: {
                  text: "Compound Interest with Monthly Contributions Over Time",
                  x: 0.5,
                  xanchor: "center",
                },
                xaxis: {
                  title: "Time (years)",
                },
                yaxis: {
                  title: "Amount ($)",
                },
                autosize: true,
                responsive: true,
                margin: {
                  l: window.innerWidth < 768 ? 0 : 50,
                  r: window.innerWidth < 768 ? 20 : 50,
                  pad: window.innerWidth < 768 ? 20 : 4,
                },
                legend: {
                  orientation: window.innerWidth < 768 ? "h" : "v",
                  x: window.innerWidth < 768 ? 0.06 : 1,
                  xanchor: window.innerWidth < 768 ? "center" : "right",
                  y: window.innerWidth < 768 ? 1.22 : 1,
                },
              };

              Plotly.newPlot("compound-interest-chart", data, layout, {
                responsive: true,
              });
            }

            // Initial chart render
            updateChart();
          </script>
        </div>
      </section>
      <aside class="right"></aside>
      <footer class="footer"></footer>
    </div>
    <div
      class="offcanvas offcanvas-start"
      data-bs-scroll="true"
      tabindex="-1"
      id="offcanvasWithBothOptions"
      aria-labelledby="offcanvasWithBothOptionsLabel"
    >
      <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="offcanvasWithBothOptionsLabel">
          User Profile
        </h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="offcanvas"
          aria-label="Close"
        ></button>
      </div>
      <div class="offcanvas-body d-flex flex-column">
        <img
          class="canvas-profile-pic d-flex mx-auto mb-3"
          src="images/logo.jpg"
          width="260px"
          alt="Profile picture"
        />
        <div class="row gap-1 justify-content-center mb-3">
          <button class="btn btn-primary col-8 col-md-5" id="editProfileButton">
            Edit Profile
          </button>
          <a class="btn btn-primary col-8 col-md-5" href="dashboard.html"
            >My Dashboard</a
          >
        </div>
        <div id="profileInfo">
          <p><strong>Name:</strong> <span id="userName">Edinson Marte</span></p>
          <p>
            <strong>Email:</strong>
            <span id="userEmail">Edinson@example.com</span>
          </p>
          <p>
            <strong>About Me:</strong>
            <span id="userAbout">Testing testing testing 123 123...</span>
          </p>
        </div>
        <div id="editProfileForm" style="display: none">
          <form>
            <div class="mb-3">
              <label for="editUserName" class="form-label">Name</label>
              <input
                type="text"
                class="form-control"
                id="editUserName"
                value="Edinson Marte"
              />
            </div>
            <div class="mb-3">
              <label for="editUserEmail" class="form-label">Email</label>
              <input
                type="email"
                class="form-control"
                id="editUserEmail"
                value="Edinson@example.com"
              />
            </div>
            <div class="mb-3">
              <label for="editUserAbout" class="form-label">About Me</label>
              <textarea class="form-control" id="editUserAbout" rows="3">
                            Testing testing edinson
                        </textarea
              >
            </div>
            <button
              type="button"
              class="btn btn-primary"
              id="saveProfileButton"
            >
              Save
            </button>
            <button
              type="button"
              class="btn btn-secondary"
              id="cancelEditButton"
            >
              Cancel
            </button>
          </form>
        </div>
      </div>
    </div>
    <script src="bootstrap.bundle.min.js"></script>
    <script type="module" src="load-template.js"></script>
    <script src="tips-scripts.js"></script>
    <script src="profile-script.js"></script>
  </body>
</html>
