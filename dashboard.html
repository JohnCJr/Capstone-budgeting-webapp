<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SavyStudents</title>
    <link rel="stylesheet" href="reset.css" />
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="bootstrap.min.css" />
    <script type="module" src="initialize-firebase.js"></script>
    <script>
      // Perform authentication check before the DOM loads, must be placed
      // here to prevent page from even loading before redirecting an unathorized user
      // placing this script anywhere else causes a delay before redirecting
      const isLoggedIn = localStorage.getItem("isLoggedIn");
      const userId = localStorage.getItem("userId");

      if (isLoggedIn !== "true" || userId === "0") {
        window.location.href = "home.html"; // Redirect to homepage
      }
    </script>
  </head>
  <body>
    <div class="site_container">
      <div
        class="modal fade"
        id="actionModal"
        tabindex="-1"
        data-bs-backdrop="static"
        aria-labelledby="actionModal"
        aria-hidden="true"
      >
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content">
            <div class="modal-header">
              <div
                id="modal-header-container"
                class="mx-auto d-flex flex-column justify-content-center"
              ></div>
              <button
                type="button"
                class="btn-close position-absolute top-0 end-0 m-2"
                data-bs-dismiss="modal"
                aria-label="Close"
              ></button>
            </div>
            <div class="modal-body" id="modal-body"></div>
          </div>
        </div>
      </div>
      <header class="header"></header>
      <main class="main">
        <div class="db-graph-1 card col-12">
          <img src="..." class="card-img-top" alt="..." />
          <div class="card-body">
            <h5 class="card-title">Card title</h5>
            <p class="card-text">
              Some quick example text to build on the card title and make up the
              bulk of the card's content.
            </p>
            <a href="#" class="btn btn-primary">Go somewhere</a>
          </div>
        </div>
      </main>
      <section class="left">
        <div
          class="row d-flex justify-content-center mx-auto my-5 col-12 gap-lg-5 gap-md-0 gap-5"
        >
          <div class="card col-10 col-lg-8 py-lg-5">
            <!-- <img src="..." class="card-img-top" alt="..." /> -->
            <div class="card-body d-flex flex-column justify-content-between">
              <h3 class="card-title text-center mb-3">
                <strong>Having trouble deciding on your budget?</strong>
              </h3>
              <div class='container mt-3 position-relative'>
                <div class='row d-flex justify-content-between gap-5'>
                  <div class='budgetContainer d-flex flex-column align-items-center col border border-success-subtle border-3 p-4 rounded-2 position-relative'>
                    <img id="currentIncomeInfo" src="images/info-circle-fill.svg" class="position-absolute top-0 end-0 m-2"
                    data-bs-toggle="tooltip" data-bs-placement="top"
                    data-bs-custom-class="custom-tooltip"
                    data-bs-title="This calculation excludes one-time sources of income.">
                    <h4 id="currentTitle" class='d-flex text-center'></h4>
                    <h4 id='currentTotalIncome'>$0.00</h4>
                  </div>
                  <div class='budgetContainer d-flex flex-column align-items-center col border border-success-subtle border-3 p-4 rounded-2'>
                    <h4 id="suggestedTitle" class='d-flex text-center'></h4>
                    <h4 id='suggestedBudget'>$0.00</h4>
                  </div>
                </div>
              </div>
              <form id="setBudget">
                <div class="row mb-3 mt-3">
                  <label for="setBudgetAmount" class="col-sm-3 col-form-label">How much would you like to save?:</label>
                  <div class="col-sm-8">
                    <div class="input-group">
                      <span class="input-group-text">$</span>
                      <input
                        type="text"
                        class="money-field form-control"
                        id="setBudgetAmount"
                        placeholder="30.00"
                      />
                    </div>
                  </div>
                </div>
                <fieldset class="budgetTypeFieldset row mb-3 ms-3 d-sm-flex d-none">
                  <legend class="col-form-label col-sm-3 pt-0">Type:</legend>
                  <div class="col-sm-8">
                    <div class="form-check">
                      <input
                        class="form-check-input"
                        type="radio"
                        name="budgetTypes"
                        id="expenseType1"
                        value="yearly"
                        checked
                      />
                      <label class="form-check-label" for="expenseType1"> Yearly </label>
                    </div>
                    <div class="form-check">
                      <input
                        class="form-check-input"
                        type="radio"
                        name="budgetTypes"
                        id="expenseType2"
                        value="monthly"
                      />
                      <label class="form-check-label" for="expenseType2"> Monthly </label>
                    </div>
                    <div class="form-check-label">
                      <input
                        class="form-check-input"
                        type="radio"
                        name="budgetTypes"
                        id="expenseType3"
                        value="weekly"
                      />
                      <label class="form-check-label ms-1" for="expenseType3">
                        Weekly
                      </label>
                    </div>
                  </div>
                </fieldset>
                <div class="row mb-3 d-sm-none d-flex" id="selectContainer">
                  <label for="budgetTypeSelect" class="col-form-label col-sm-3 pt-0"
                    >Type:</label
                  >
                  <div class="col-sm-8">
                    <select
                      class="form-select form-select-sm"
                      id="budgetTypeSelect"
                      aria-label="Small type select"
                    >
                      <option value="yearly">Yearly</option>
                      <option value="monthly">Monthly</option>
                      <option value="weekly">Weekly</option>
                    </select>
                  </div>
                </div>
                <div
                  id="set-budget-error-msg"
                  class="text-danger mt-2 justify-content-center"
                  style="display: none"
                ></div>
                <button
                id="setBudgetButton"
                type="button"
                class="btn btn-primary d-flex mx-auto"
                data-bs-toggle="modal"
                data-bs-target="#actionModal"
                data-source="forms/update-budget.html"
                data-title="
                <h2>Update Budget</h2>
                <div class='container mt-3'>
                  <div class='row d-flex justify-content-between gap-5'>
                    <div class='budgetContainer d-flex flex-column align-items-center col border border-success-subtle border-3 p-4 rounded-2'>
                      <h4 class='d-flex text-center'>Current Budget:</h4>
                      <h4 id='currentBudget'></h4>
                    </div>
                    <div class='budgetContainer d-flex flex-column align-items-center col border border-success-subtle border-3 p-4 rounded-2'>
                      <h4 class='d-flex text-center'>New<br>Budget:</h4>
                      <h4 id='newBudget'></h4>
                    </div>
                  </div>
                </div>"
              >
                Set Budget
              </button>
            </form>
            </div>
          </div>
        <div
          class="row d-flex justify-content-center mx-auto my-5 col-12 gap-lg-5 gap-md-0 gap-5"
        >
          <div class="card col-lg-3 col-md-4 col-sm-12">
            <!-- <img src="..." class="card-img-top" alt="..." /> -->
            <div class="card-body d-flex flex-column justify-content-between">
              <h5 class="card-title text-center mb-3">
                <strong>Want to update your budget?</strong>
              </h5>
              <p class="card-text text">
                It's always nice to change your budget based on your life
                situation. Maybe you want to save up just a bit more than your
                current budget provides.
              </p>
              <button
                type="button"
                class="btn btn-primary d-flex mx-auto"
                data-bs-toggle="modal"
                data-bs-target="#actionModal"
                data-source="forms/update-budget.html"
                data-title="
                <h2>Update Budget</h2>
                <div class='container mt-3'>
                  <div class='row d-flex justify-content-between gap-5'>
                    <div class='budgetContainer d-flex flex-column align-items-center col border border-success-subtle border-3 p-4 rounded-2'>
                      <h4 class='d-flex text-center'>Current Budget:</h4>
                      <h4 id='currentBudget'></h4>
                    </div>
                    <div class='budgetContainer d-flex flex-column align-items-center col border border-success-subtle border-3 p-4 rounded-2'>
                      <h4 class='d-flex text-center'>New<br>Budget:</h4>
                      <h4 id='newBudget'></h4>
                    </div>
                  </div>
                </div>"
              >
                Update Budget
              </button>
            </div>
          </div>

          <div class="card col-lg-3 col-md-4 col-sm-12">
            <!-- <img src="..." class="card-img-top" alt="..." /> -->
            <div class="card-body d-flex flex-column justify-content-between">
              <h5 class="card-title text-center mb-3">
                <strong>Made new expense?</strong>
              </h5>
              <p class="card-text text">
                Click below to enter a new expense so we can help you track your
                budget categories. Make sure to log your expenses frequently!
              </p>
              <button
                type="button"
                class="btn btn-primary d-flex mx-auto"
                data-bs-toggle="modal"
                data-bs-target="#actionModal"
                data-source="forms/new-expense.html"
                data-title="<h2>Enter new expense</h2>"
              >
                Add Expense
              </button>
            </div>
          </div>

          <div class="card col-lg-3 col-md-4 col-sm-12">
            <!-- <img src="..." class="card-img-top" alt="..." /> -->
            <div class="card-body d-flex flex-column justify-content-between">
              <h5 class="card-title text-center mb-3">
                <strong>Need to add a new source of income?</strong>
              </h5>
              <p class="card-text text">
                Click below to enter a new expense so we can help you track your
                budget categories. Make sure to log your expenses frequently!
              </p>
              <button
                type="button"
                class="btn btn-primary d-flex mx-auto"
                data-bs-toggle="modal"
                data-bs-target="#actionModal"
                data-source="forms/new-income.html"
                data-title="<h2>Add New Income</h2>
                <h3>Current Total Income:</h3>
                <h3 id='currentTotalIncome'>$100.00</h3>"
              >
                Add Income
              </button>
            </div>
          </div>
        </div>
      </section>
      <aside class="right">
        <!-- eperimental html code to populate the tables based on database information -->
        <div class="accordion" id="accordionTransactions">
          <div class="accordion-item">
            <h2 class="accordion-header d-flex mx-auto" id="headingOne">
              <button
                class="accordion-button"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#collapseOne"
                aria-expanded="true"
                aria-controls="collapseOne"
              >
                Budgets
              </button>
            </h2>
            <div
              id="collapseOne"
              class="accordion-collapse collapse show"
              aria-labelledby="headingOne"
              data-bs-parent="#accordionTransactions"
            >
              <div class="accordion-body">
                <div
                  class="table-responsive d-flex flex-column align-items-center"
                >
                  <table class="table table-striped">
                    <thead>
                      <tr class="table-primary">
                        <th scope="col">Category</th>
                        <th scope="col">Limit</th>
                        <th scope="col">Spent</th>
                        <th scope="col">Remaining</th>
                      </tr>
                    </thead>
                    <tbody id="budgetsTableBody"></tbody>
                    <tfoot id="budgetsTableFoot"></tfoot>
                  </table>
                </div>
              </div>
            </div>
          </div>

          <div class="accordion-item">
            <h2 class="accordion-header" id="headingTwo">
              <button
                class="accordion-button collapsed"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#collapseTwo"
                aria-expanded="false"
                aria-controls="collapseTwo"
              >
                Expenses
              </button>
            </h2>
            <div
              id="collapseTwo"
              class="accordion-collapse collapse"
              aria-labelledby="headingTwo"
              data-bs-parent="#accordionTransactions"
            >
              <div class="accordion-body">
                <div
                  class="table-responsive d-flex flex-column align-items-center"
                >
                  <div class="d-flex justify-content-center mb-3 gap-5">
                    <div>
                      <label for="sortField">Sort by:</label>
                      <select id="sortField" class="form-select form-select-md">
                        <option value="all" selected>All</option>
                        <option value="date">Date</option>
                        <option value="description">Description</option>
                        <option value="amount">Amount</option>
                        <option value="category">Category</option>
                      </select>
                    </div>
                    <div>
                      <label for="sortOrder">Order:</label>
                      <select id="sortOrder" class="form-select form-select-md">
                        <option value="asc" selected>Ascending</option>
                        <option value="desc">Descending</option>
                      </select>
                    </div>
                    <div>
                      <label for="filterField">Filter:</label>
                      <select
                        id="filterField"
                        class="form-select form-select-md"
                      >
                        <option value="none" selected>None</option>
                        <option value="food">Food</option>
                        <option value="utility">Utility</option>
                        <option value="entertainment">Entertainment</option>
                        <option value="other">Other</option>
                      </select>
                    </div>
                  </div>
                  <table class="table table-striped">
                    <thead>
                      <tr class="table-primary">
                        <th scope="col">Date</th>
                        <th scope="col">Description</th>
                        <th scope="col">Amount</th>
                        <th scope="col">Category</th>
                      </tr>
                    </thead>
                    <tbody id="expensesTableBody"></tbody>
                    <tfoot id="expensesTableFoot"></tfoot>
                  </table>
                </div>
              </div>
            </div>
          </div>
          <div class="accordion-item">
            <h2 class="accordion-header" id="headingThree">
              <button
                class="accordion-button collapsed"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#collapseThree"
                aria-expanded="false"
                aria-controls="collapseThree"
              >
                Income
              </button>
            </h2>
            <div
              id="collapseThree"
              class="accordion-collapse collapse"
              aria-labelledby="headingThree"
              data-bs-parent="#accordionTransactions"
            >
              <div class="accordion-body">
                <div
                  class="table-responsive d-flex flex-column align-items-center"
                >
                  <table class="table table-striped">
                    <thead>
                      <tr class="table-primary">
                        <th scope="col">Date</th>
                        <th scope="col">Description</th>
                        <th scope="col">Interval</th>
                        <th scope="col">Amount</th>
                      </tr>
                    </thead>
                    <tbody id="incomeTableBody"></tbody>
                    <tfoot id="incomeTableFoot"></tfoot>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div
          id="toasterContainer"
          class="toast-container position-fixed bottom-0 end-0 p-3"
        ></div>
      </aside>
      <footer class="footer"></footer>
    </div>
    <div
      class="offcanvas offcanvas-start"
      data-bs-scroll="true"
      tabindex="-1"
      id="offcanvasWithBothOptions"
      aria-labelledby="offcanvasWithBothOptionsLabel"
    >
      <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="offcanvasWithBothOptionsLabel">
          User Name
        </h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="offcanvas"
          aria-label="Close"
        ></button>
      </div>
      <div class="offcanvas-body d-flex flex-column">
        <img
          class="canvas-profile-pic d-flex mx-auto mb-3"
          src="images/logo.jpg"
          width="260px"
          alt=""
        />
        <div class="row gap-1 justify-content-center mb-3">
          <a class="btn btn-primary col-8 col-md-5" href="#">Edit Profile</a>
          <a class="btn btn-primary col-8 col-md-5" href="dashboard.html"
            >My Dashboard</a
          >
        </div>
        <p>Brief description about the user.</p>
        <p>
          Lorem ipsum dolor sit amet, consectetur adipisicing elit. Unde
          nesciunt necessitatibus, fuga deleniti mollitia atque molestias aut,
          nemo nihil quis labore iste natus. Debitis voluptatem velit possimus,
          dolores quasi est, et labore aperiam doloribus reprehenderit ut
          sapiente similique earum. Perferendis obcaecati magnam omnis!
          Accusamus velit ipsum enim fuga ea quidem facere delectus pariatur
          placeat dicta suscipit mollitia facilis cum, voluptatum distinctio
          reiciendis voluptates aspernatur soluta officia vel exercitationem hic
          ipsam laboriosam possimus! Laborum amet expedita tempore quis corrupti
          rem! Molestias, nemo qui exercitationem assumenda recusandae dolorem
          iste nulla nisi maxime nam ad non dolore doloremque, porro maiores
          dolorum error beatae?
        </p>
      </div>
    </div>
    <script type="module" src="form-modal-load.js"></script>
    <script src="bootstrap.bundle.min.js"></script>
    <script type="module" src="load-template.js"></script>
    <script type="module" src="populateTables.js"></script>
    <script src="scripts/savy_script.js"></script>
  </body>
</html>
